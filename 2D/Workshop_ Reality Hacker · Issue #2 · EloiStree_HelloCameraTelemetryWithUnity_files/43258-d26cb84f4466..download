"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[43258],{2362:(e,t,r)=>{r.d(t,{Zf:()=>o,i5:()=>_,mW:()=>f});var a=r(77783),n=r(21067),i=r(82106),s=r(69599);let o={CACHE_HIT:"offline_cache.cache_hit",CACHE_MISS:"offline_cache.cache_miss",CACHE_EVICT:"offline_cache.cache_evict",CACHE_INVALID:"offline_cache.stale_structure",CACHE_EXPIRED:"offline_cache.expired_item",CACHE_SET:"offline_cache.cache_set",CACHE_TIMEOUT:"offline_cache.cache_timeout",CACHE_SESSION_DISABLED:"offline_cache.session_disabled",CACHE_READ_ERROR:"offline_cache.read_error",CACHE_EVICT_ERROR:"offline_cache.evict_error",CACHE_WRITE_ERROR:"offline_cache.write_error",CLEANUP_STARTED:"offline_cache.cleanup_started",CLEANUP_COMPLETED:"offline_cache.cleanup_completed",CLEANUP_ERROR:"offline_cache.cleanup_error",CLEANUP_ITEM_ERROR:"offline_cache.cleanup_item_error",ENTRIES_READ:"offline_cache.entries_read",ANY:"offline_cache.*",NONE:"offline_cache.none"},l=!1,c=class IndexedDbTimeoutError extends Error{constructor(e,t,r){super(`IndexedDB ${e} operation timed out after ${r}ms for key: ${t}`),this.name="IndexedDbTimeoutError"}},u="offline_cache::",d=()=>u+(0,n.cj)(),h=new Map;function _({validator:e,sendAnalyticsEvent:t,storeName:r="queries"}){let n=`${d()}:${r}`,u=h.get(n);if(u)return u;function _(e){return!!(e.state.dataUpdatedAt&&e.state.ttl&&Date.now()-e.state.dataUpdatedAt>e.state.ttl)||void 0!==e.state.cacheVersion&&1!==e.state.cacheVersion}let f=(0,a.y$)(d(),r);function p(){return(0,s.G7)("disable-indexdb-operations")}async function m(e,r,a,n){if(!(0,s.G7)("issues_cache_operation_timeout"))return e;let i=null,l=new Promise((e,s)=>{i=setTimeout(()=>{t(o.CACHE_TIMEOUT,n,{operation:a}),s(new c(a,n,r))},r)});try{let t=await Promise.race([e,l]);return i&&clearTimeout(i),t}catch(e){throw i&&clearTimeout(i),e}}async function w(){if(E.isCleanupRunning)return;E.isCleanupRunning=!0;let e=Date.now();try{t(o.CLEANUP_STARTED,"",{});let r=await (0,a.jO)(f),n=r.length,i=0;for(let[e,n]of r)try{_(n)&&(t(o.CACHE_EVICT,e.toString(),{reason:"periodic_cleanup"}),(0,a.yH)(e,f).catch(r=>{t(o.CLEANUP_ITEM_ERROR,e.toString(),{error:String(r)})}),i++)}catch(r){t(o.CLEANUP_ITEM_ERROR,e.toString(),{error:String(r)})}t(o.CLEANUP_COMPLETED,"",{removed_count:i,total_entries:n,duration_ms:Date.now()-e})}catch(e){t(o.CLEANUP_ERROR,"",{error:String(e)})}finally{E.isCleanupRunning=!1}}let E={cleanupIntervalId:void 0,isCleanupRunning:!1,async getItem(r,n){if(p())return;let i=l?{session_disabled:!0}:{},s=Date.now();try{let l=await m((0,a.Jt)(r,f),500,"read",r),c=Date.now()-s;if(!l?.state?.data)return void t(o.CACHE_MISS,r.toString(),{...n,...i,read_duration_ms:c});if(_(l)){this.removeItem(r),t?.("offline_cache.expired_item",r.toString(),{...n,...i,read_duration_ms:c});return}if(!e.Check(l.state.data))return void t(o.CACHE_INVALID,r.toString(),{...n,...i,read_duration_ms:c});let u=l.state.dataUpdatedAt?Date.now()-l.state.dataUpdatedAt:"N/A",d=l.state.ttl??"N/A";return t(o.CACHE_HIT,r.toString(),{...n,...i,age:u,ttl:d,preheat_source:l.state.preheatSource,read_duration_ms:c}),l}catch(a){let e=Date.now()-s;if(a instanceof c){t(o.CACHE_SESSION_DISABLED,r.toString(),{reason:"read_timeout",read_duration_ms:e}),t(o.CACHE_MISS,r.toString(),{...n,session_disabled:l,read_duration_ms:e,timeout:!0}),l=!0;return}throw a}},async setItem(e,r,n,s,u){if(p())return Promise.resolve();let d=l?{session_disabled:!0}:{},h=s??r.state.ttl,_={...r,state:{...r.state,dataUpdatedAt:n??r.state.dataUpdatedAt,ttl:h,cacheVersion:1}};(0,i.D)(e,t),t(o.CACHE_SET,e.toString(),{...u,...d,ttl:h});try{await m((0,a.hZ)(e,_,f),2e3,"write",e)}catch(e){if(e instanceof c)return;throw e}},removeItem:(e,r)=>(t(o.CACHE_EVICT,e.toString(),r),(0,a.yH)(e,f)),isBustedOrExpired:e=>_(e),async entries(){let e=Date.now(),r=await (0,a.jO)(f),n=Date.now()-e;return t(o.ENTRIES_READ,"",{duration_ms:n,entry_count:r.length}),r},cleanupExpiredEntries:w,stopPeriodicCleanup:function(){void 0!==E.cleanupIntervalId&&(clearInterval(E.cleanupIntervalId),E.cleanupIntervalId=void 0)}};return h.set(n,E),!function(e=36e5){let t;"undefined"!=typeof window&&("function"==typeof(t=window).requestIdleCallback?t.requestIdleCallback(()=>void w(),{timeout:1e4}):setTimeout(()=>void w(),1e4),E.cleanupIntervalId=window.setInterval(()=>void w(),e))}(),E}async function f(){try{let e=await window?.indexedDB?.databases?.();if(!e)return;let t=e.filter(e=>e.name?.startsWith(u)).map(async e=>{if(e.name)try{let t=indexedDB.open(e.name,e.version),r=await new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error),t.onupgradeneeded=()=>{t.transaction?.abort(),r(Error("Unexpected upgrade needed"))}}),n=Array.from(r.objectStoreNames);r.close();let i=n.map(async t=>{if(e.name)try{let r=(0,a.y$)(e.name,t);await (0,a.IU)(r)}catch{}});await Promise.all(i)}catch{}});await Promise.allSettled(t)}catch{}}},11418:(e,t,r)=>{let a;r.d(t,{H:()=>N});var n=r(35750),i=r(18150),s=r(85242),o=r(88243),l=r(16213),c=r(10204),u=new WeakMap,d=new WeakSet;let AliveSession=class AliveSession extends c.ib{constructor(e,t,r,a,n){super(e,()=>(0,o._)(this,d,h).call(this),r,a,void 0,n),(0,l._)(this,d),(0,i._)(this,u,{writable:!0,value:void 0}),(0,s._)(this,u,t)}};function h(){return _((0,n._)(this,u))}async function _(e){let t=await f(e);return t&&t.url&&t.token?p(t.url,t.token):null}async function f(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function p(e,t){let r=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(r.ok)return r.text();throw Error("fetch error")}var m=r(70170),w=r(34095),E=r(82075),b=r(23683);function v(e,{channel:t,type:r,data:a}){for(let n of e)n.dispatchEvent(new CustomEvent(`socket:${r}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:a}}))}var g=new WeakMap,y=new WeakMap,C=new WeakMap,S=new WeakMap,A=new WeakMap,I=new WeakSet;let R=class AliveSessionProxy{subscribe(e){let t=(0,n._)(this,y).add(...e);t.length&&(0,n._)(this,g).port.postMessage({subscribe:t});let r=new Set(t.map(e=>e.name)),a=e.reduce((e,t)=>{let a=t.topic.name;return(0,c.JR)(a)&&!r.has(a)&&e.add(a),e},new Set);a.size&&(0,n._)(this,g).port.postMessage({requestPresence:Array.from(a)})}unsubscribeAll(...e){let t=(0,n._)(this,y).drain(...e);t.length&&(0,n._)(this,g).port.postMessage({unsubscribe:t});let r=(0,n._)(this,C).removeSubscribers(e);this.sendPresenceMetadataUpdate(r)}updatePresenceMetadata(e){let t=new Set;for(let r of e)(0,n._)(this,C).setMetadata(r),t.add(r.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let r of e)t.push({channelName:r,metadata:(0,n._)(this,C).getChannelMetadata(r)});(0,n._)(this,g).port.postMessage({updatePresenceMetadata:t})}online(){(0,n._)(this,g).port.postMessage({online:!0})}offline(){(0,n._)(this,g).port.postMessage({online:!1})}hangup(){(0,n._)(this,g).port.postMessage({hangup:!0})}constructor(e,t,r,a,u,d){(0,l._)(this,I),(0,i._)(this,g,{writable:!0,value:void 0}),(0,i._)(this,y,{writable:!0,value:new c.m0}),(0,i._)(this,C,{writable:!0,value:new c.VH}),(0,i._)(this,S,{writable:!0,value:void 0}),(0,i._)(this,A,{writable:!0,value:new Map}),(0,s._)(this,S,u),(0,s._)(this,g,new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${a}`,type:"module"})),(0,n._)(this,g).port.onmessage=({data:e})=>(0,o._)(this,I,P).call(this,e),(0,n._)(this,g).port.postMessage({connect:{url:t,refreshUrl:r,options:d}})}};function P(e){let{channel:t}=e;if("presence"===e.type){let r=(0,n._)(this,A).get(t);r||(r=(0,m.s)((e,r)=>{(0,n._)(this,S).call(this,e,r),(0,n._)(this,A).delete(t)},100),(0,n._)(this,A).set(t,r)),r((0,n._)(this,y).subscribers(t),e);return}(0,n._)(this,S).call(this,(0,n._)(this,y).subscribers(t),e)}async function T(){let e,t=(e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href"))&&e.startsWith("/")?e:null;if(!t)return;let r=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!r)return;let a=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!a)return;let n=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!n)return;let i=(()=>{let e={};if(!(0,b.nr)()&&"SharedWorker"in window&&"true"!==(0,E.A)("localStorage").getItem("bypassSharedWorker"))try{return new R(t,r,a,n,v,e)}catch{}return new AliveSession(r,a,!1,v,e)})();return window.addEventListener("online",()=>i.online()),window.addEventListener("offline",()=>i.offline()),window.addEventListener("pagehide",()=>{"hangup"in i&&i.hangup()}),i}async function M(){return await w.G,T()}function N(){return a||(a=M())}},25111:(e,t,r)=>{r.d(t,{X:()=>g});var a,n=r(74848),i=r(50467);let s=new Map,o=class Resource{load(){return null==this._promise&&(this._promise=this._loader(),(async()=>{try{this._result=await this._promise}catch(e){throw this._error=e,e}})()),this._promise}getModuleId(){return this._moduleId}get(){return this._result}getModuleIfRequired(){return this.get()}read(){if(null!=this._result)return this._result;if(null!=this._error)throw this._error;throw this._promise}constructor(e,t,r=null){(0,i._)(this,"_moduleId",void 0),(0,i._)(this,"_loader",void 0),(0,i._)(this,"_error",void 0),(0,i._)(this,"_promise",void 0),(0,i._)(this,"_result",void 0),this._moduleId=e,this._loader=t,this._error=null,this._promise=null,this._result=r}};function l(e,t,r=null){let a=s.get(e);return null==a&&(a=new o(e,t,r),s.set(e,a)),a}try{l.displayName||(l.displayName="JSResource")}catch{}var c=r(27744),u=r(80443),d=r(30721),h=r(96540),_=r(69487),f=r(18312),p=r(64549),m=r(87683),w=r(53419),E=r(69599),b=r(6923);let v=e=>e;function g({path:e,resourceName:t,componentLoader:r,Component:a,queryConfigs:i,transformVariables:s=v,title:o,relayEnvironment:y,fallback:C,maxAge:S,transitionType:A=c.E.FETCH_THEN_TRANSITION,cacheTTL:I},R={}){let P=t||a?.displayName;if(void 0===P)throw Error("invalid internal resourceName");let T={root:l(P,r,a),getPreloadProps:e=>({queries:function(e,t,r,a,n){let i={};for(let[s,{concreteRequest:o,variableMappers:l}]of Object.entries(e)){let e="Request"===o.kind?(0,p.wY)(o):void 0,c=function(e,t,r,a){let n=t(e?.(r,a)??{},r,a);for(let e in n)if(void 0===n[e])return;return n}(l,r,t,a);c&&(i[s]={variables:Object.fromEntries(Object.entries(c).sort(([e],[t])=>e<t?-1:+(e>t))),parameters:{...o,params:{...o.params,metadata:{...o.params.metadata,isRelayRouteRequest:!0,ttl:n,defaultValues:e}}}})}return i}(i,e,s,y,I)})};function M({pathParams:e,searchParams:t,embeddedData:r}){let a=(0,E.G7)("issues_react_client_side_caching_analytics"),n=new Map;if(r?.payload?.preloadedQueries)for(let{queryId:e,variables:t,result:a,timestamp:i}of r.payload.preloadedQueries){let r=n.get(e);r||(r=new Map);let s=JSON.stringify(t);a.timestamp=i,r.set(s,a),n.set(e,r)}let i=new Map;if(r?.payload?.preloadedSubscriptions)for(let[e,t]of Object.entries(r.payload.preloadedSubscriptions)){let r=new Map;for(let[e,a]of Object.entries(t))r.set(e,a);i.set(e,r)}r?.payload?.preloaded_records&&y.getStore().publish(new _.RecordSource(r?.payload?.preloaded_records));let{baseUrl:s,getPreloadedSubscriptions:l,stalePreloadedData:c}=y.options,u=l?l():void 0,h=b.KJ?(0,m.VC)({sendAnalyticsEvent:(e,t,r={})=>{let a={react:!0,version:m.L7};(0,w.BI)(e,{...a,...r,target:t})},reportableEvents:a?m.Zf.ANY:m.Zf.NONE}):void 0,p=new d.VB(n,r?.enabled_features,function(e,t){if(!t||0===t.size)return e;let r=new Map(e);for(let[e,a]of t)r.has(e)||r.set(e,a);return r}(i,u),s,S,h,c,e=>{y.options={...y.options,stalePreloadedData:e}});y.__setNet(p),y.options={baseUrl:s,getPreloadedSubscriptions:()=>p.getPreloadedSubscriptions(),stalePreloadedData:c??!1};let v=(0,f.loadEntryPoint)({getEnvironment:()=>y},T,{pathParams:e,searchParams:t}),g=o;for(let t in e)g=g.replaceAll(`:${t}`,e[t]??"");return{type:"loaded",data:{entryPointReference:v},title:g,isValid:()=>!Object.values(v.queries).some(e=>e.isDisposed)}}return{path:e,Component:()=>{let e=(0,u.N)(),t=e?.data?.entryPointReference;return t?(0,n.jsx)(f.RelayEnvironmentProvider,{environment:y,children:(0,n.jsx)(h.Suspense,{fallback:C,children:(0,n.jsx)(f.EntryPointContainer,{entryPointReference:t,props:R})})}):null},coreLoader:async function e({pathParams:e,location:t,embeddedData:r}){let a=M({pathParams:e,searchParams:new URLSearchParams(t.search),embeddedData:r||void 0});if(A===c.E.FETCH_THEN_TRANSITION){let e=Object.values(a.data.entryPointReference.queries).map(e=>e.source?.toPromise()).filter(e=>void 0!==e);e.length>0&&await Promise.allSettled(e)}return a},loadFromEmbeddedData:function({pathParams:e,embeddedData:t,location:r}){let{data:a,isValid:n}=M({pathParams:e,embeddedData:t,searchParams:new URLSearchParams(r.search)}),i=o;for(let t in e)i=i.replaceAll(`:${t}`,e[t]??"");return{data:a,title:i,isValid:n}},transitionType:A}}try{(a=Wrapper).displayName||(a.displayName="Wrapper")}catch{}},33303:(e,t,r)=>{function a(){return Promise.resolve()}function n(){return new Promise(window.requestAnimationFrame)}async function i(e,t){let r,a=new Promise(t=>{r=self.setTimeout(t,e)});if(!t)return a;try{var n;await Promise.race([a,(n=t,new Promise((e,t)=>{let r=Error("aborted");r.name="AbortError",n.aborted?t(r):n.addEventListener("abort",()=>t(r))}))])}catch(e){throw self.clearTimeout(r),e}}function s(e){let t=[];return function(r){t.push(r),1===t.length&&queueMicrotask(()=>{let r=t.slice(0);t.length=0,e(r)})}}r.d(t,{G$:()=>n,k2:()=>a,rK:()=>s,uk:()=>i})},52475:(e,t,r)=>{r.d(t,{_S:()=>i,cB:()=>o,cW:()=>s});var a=r(53627),n=r(56038);let i=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},s=e=>{(0,a.C3)({appId:e})},o=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};n.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:o()})},!0)},73056:(e,t,r)=>{r.d(t,{$:()=>s});var a=r(10204),n=r(33303);let i=new WeakMap;function s(e,t,r){let s;if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let o=a.KK.parse(t);if(!o)throw Error("Invalid channel name");let l={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&r(e.detail.data)}},topic:o},c=((s=i.get(e))||(s={subscribe:(0,n.rK)(t=>e.subscribe(t.flat())),unsubscribeAll:(0,n.rK)(t=>e.unsubscribeAll(...t))},i.set(e,s)),s);return c.subscribe([l]),{unsubscribe:()=>c.unsubscribeAll(l.subscriber)}}},82106:(e,t,r)=>{r.d(t,{D:()=>a});let a=async(e,t)=>{if(t&&"undefined"!=typeof navigator&&navigator.storage?.estimate)try{let r=await navigator.storage.estimate(),a=r.quota??0,n=r.usage??0;t("offline_cache.storage_space",e,{quota_bytes:a,usage_bytes:n,available_bytes:a-n,usage_percent:a>0?n/a*100:0})}catch{}}}}]);
//# sourceMappingURL=43258-c79595b768ba.js.map